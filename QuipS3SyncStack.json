{
 "Description": "Quip-to-S3 document synchronization system (default)",
 "Parameters": {
  "customName": {
   "Type": "String",
   "Default": "default",
   "Description": "Custom name for resource naming (3-40 characters, lowercase letters, numbers, and hyphens)"
  },
  "quicksightPrincipalId": {
   "Type": "String",
   "Default": "",
   "Description": "QuickSight principal ID for S3 bucket access"
  },
  "quicksightNamespace": {
   "Type": "String",
   "Default": "default",
   "Description": "QuickSight namespace"
  },
  "serviceRoleArn": {
   "Type": "String",
   "Default": "",
   "Description": "QuickSight service role ARN for S3 access"
  },
  "quipAccessToken": {
   "Type": "String",
   "Default": "",
   "Description": "Quip access token for API authentication",
   "NoEcho": true
  },
  "quipFolderIds": {
   "Type": "String",
   "Default": "",
   "Description": "Comma-separated list of Quip folder IDs to synchronize"
  },
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Resources": {
  "QuipSyncBucket15642FBE": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": {
     "Fn::Join": [
      "",
      [
       {
        "Ref": "AWS::AccountId"
       },
       "-quip-sync-default"
      ]
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "DataClassification",
      "Value": "Internal"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncBucket/Resource"
   }
  },
  "QuipSyncBucketPolicy6C74F2C1": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "QuipSyncBucket15642FBE"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetBucketLocation",
        "s3:GetObject",
        "s3:GetObjectVersion",
        "s3:ListBucket",
        "s3:ListBucketVersions"
       ],
       "Condition": {
        "StringEquals": {
         "aws:PrincipalTag/QuickSightDataSourceCreatorPrincipalId": {
          "Ref": "quicksightPrincipalId"
         },
         "aws:PrincipalTag/QuickSightNamespace": {
          "Ref": "quicksightNamespace"
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Ref": "serviceRoleArn"
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "QuipSyncBucket15642FBE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "QuipSyncBucket15642FBE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ],
       "Sid": "AllowQuickSuite"
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncBucketPolicy/Resource"
   },
   "Condition": "HasServiceRole"
  },
  "QuipCredentials1A25D81E": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "Description": "Quip access token and folder IDs for synchronization (default)",
    "Name": "quip-sync-default-credentials",
    "SecretString": {
     "Fn::Join": [
      "",
      [
       "{\"quip_access_token\": \"",
       {
        "Ref": "quipAccessToken"
       },
       "\", \"folder_ids\": \"",
       {
        "Ref": "quipFolderIds"
       },
       "\"}"
      ]
     ]
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipCredentials/Resource"
   }
  },
  "QuipSyncLambdaRole77A44250": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Execution role for Quip-S3 synchronization Lambda function (default)",
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "secretsmanager:GetSecretValue",
         "Effect": "Allow",
         "Resource": {
          "Ref": "QuipCredentials1A25D81E"
         },
         "Sid": "AllowGetQuipCredentials"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "QuipSyncSecretsManagerPolicy"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "s3:GetBucketLocation",
          "s3:ListBucket"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "QuipSyncBucket15642FBE",
           "Arn"
          ]
         },
         "Sid": "AllowS3BucketOperations"
        },
        {
         "Action": [
          "s3:GetObject",
          "s3:PutObject",
          "s3:PutObjectMetadata",
          "s3:PutObjectTagging"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "QuipSyncBucket15642FBE",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         },
         "Sid": "AllowS3ObjectOperations"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "QuipSyncS3Policy"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:GetObject",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            "arn:aws:s3:::",
            {
             "Ref": "AWS::AccountId"
            },
            "-quip-s3-sync-lambda/quip-sync-lambda.zip"
           ]
          ]
         },
         "Sid": "AllowGetLambdaCode"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "QuipSyncLambdaCodeS3Policy"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:DescribeLogGroups",
          "logs:DescribeLogStreams",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::Join": [
            "",
            [
             "arn:aws:logs:",
             {
              "Ref": "AWS::Region"
             },
             ":",
             {
              "Ref": "AWS::AccountId"
             },
             ":log-group:/aws/lambda/quip-sync-default-function"
            ]
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             "arn:aws:logs:",
             {
              "Ref": "AWS::Region"
             },
             ":",
             {
              "Ref": "AWS::AccountId"
             },
             ":log-group:/aws/lambda/quip-sync-default-function:*"
            ]
           ]
          }
         ],
         "Sid": "AllowCloudWatchLogsOperations"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "QuipSyncCloudWatchLogsPolicy"
     }
    ],
    "RoleName": "quip-sync-default-lambda-execution-role",
    "Tags": [
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncLambdaRole/Resource"
   }
  },
  "QuipSyncLogGroup1DF0CB80": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/lambda/quip-sync-default-function",
    "RetentionInDays": 30
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncLogGroup/Resource"
   }
  },
  "QuipSyncFunctionD64B4FCC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Join": [
       "",
       [
        {
         "Ref": "AWS::AccountId"
        },
        "-quip-s3-sync-lambda"
       ]
      ]
     },
     "S3Key": "quip-sync-lambda.zip"
    },
    "Environment": {
     "Variables": {
      "S3_BUCKET_NAME": {
       "Ref": "QuipSyncBucket15642FBE"
      },
      "SECRET_NAME": {
       "Fn::Join": [
        "-",
        [
         {
          "Fn::Select": [
           0,
           {
            "Fn::Split": [
             "-",
             {
              "Fn::Select": [
               6,
               {
                "Fn::Split": [
                 ":",
                 {
                  "Ref": "QuipCredentials1A25D81E"
                 }
                ]
               }
              ]
             }
            ]
           }
          ]
         },
         {
          "Fn::Select": [
           1,
           {
            "Fn::Split": [
             "-",
             {
              "Fn::Select": [
               6,
               {
                "Fn::Split": [
                 ":",
                 {
                  "Ref": "QuipCredentials1A25D81E"
                 }
                ]
               }
              ]
             }
            ]
           }
          ]
         },
         {
          "Fn::Select": [
           2,
           {
            "Fn::Split": [
             "-",
             {
              "Fn::Select": [
               6,
               {
                "Fn::Split": [
                 ":",
                 {
                  "Ref": "QuipCredentials1A25D81E"
                 }
                ]
               }
              ]
             }
            ]
           }
          ]
         },
         {
          "Fn::Select": [
           3,
           {
            "Fn::Split": [
             "-",
             {
              "Fn::Select": [
               6,
               {
                "Fn::Split": [
                 ":",
                 {
                  "Ref": "QuipCredentials1A25D81E"
                 }
                ]
               }
              ]
             }
            ]
           }
          ]
         }
        ]
       ]
      },
      "LOG_LEVEL": "INFO"
     }
    },
    "FunctionName": "quip-sync-default-function",
    "Handler": "lambda_function.lambda_handler",
    "LoggingConfig": {
     "LogGroup": {
      "Ref": "QuipSyncLogGroup1DF0CB80"
     }
    },
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "QuipSyncLambdaRole77A44250",
      "Arn"
     ]
    },
    "Runtime": "python3.13",
    "Tags": [
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "QuipSyncLambdaRole77A44250"
   ],
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncFunction/Resource"
   }
  },
  "QuipSyncFunctionAllowEventBridgeInvokeCDA01A8B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "QuipSyncFunctionD64B4FCC",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "QuipSyncSchedule974E6EDA",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncFunction/AllowEventBridgeInvoke"
   }
  },
  "QuipSyncSchedule974E6EDA": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Daily trigger for Quip-S3 synchronization at midnight Sydney time (default)",
    "Name": "quip-sync-default-daily-schedule",
    "ScheduleExpression": "cron(0 14 * * ? *)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "QuipSyncFunctionD64B4FCC",
        "Arn"
       ]
      },
      "Id": "Target0",
      "RetryPolicy": {
       "MaximumEventAgeInSeconds": 7200,
       "MaximumRetryAttempts": 2
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncSchedule/Resource"
   }
  },
  "QuipSyncScheduleAllowEventRuleQuipSyncStackdefaultQuipSyncFunctionD03A9F41FF107DB0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "QuipSyncFunctionD64B4FCC",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "QuipSyncSchedule974E6EDA",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncSchedule/AllowEventRuleQuipSyncStackdefaultQuipSyncFunctionD03A9F41"
   }
  },
  "QuipSyncAlarmTopicEE6EA8E0": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "DisplayName": "Quip S3 Sync Alarms (default)",
    "Tags": [
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "TopicName": "quip-sync-default-alarms"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncAlarmTopic/Resource"
   }
  },
  "QuipSyncLambdaErrorAlarm8028CA5F": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when Quip S3 sync Lambda function encounters errors (default)",
    "AlarmName": "quip-sync-default-lambda-errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Errors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "lambda_errors"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 1,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncLambdaErrorAlarm/Resource"
   }
  },
  "QuipSyncLambdaDurationAlarm4E74C037": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when Quip S3 sync Lambda function approaches timeout (default)",
    "AlarmName": "quip-sync-default-lambda-duration",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Duration",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "lambda_duration"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 780000,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncLambdaDurationAlarm/Resource"
   }
  },
  "QuipSyncLambdaThrottleAlarm12F9DB66": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when Quip S3 sync Lambda function is throttled (default)",
    "AlarmName": "quip-sync-default-lambda-throttles",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Throttles",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "lambda_throttles"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 1,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncLambdaThrottleAlarm/Resource"
   }
  },
  "QuipSyncQuipAPIErrorAlarmDF9CE0C7": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when Quip API error rate is high (default)",
    "AlarmName": "quip-sync-default-quip-api-errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "QuipAPIErrors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "quip_api_errors"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncQuipAPIErrorAlarm/Resource"
   }
  },
  "QuipSyncS3UploadErrorAlarm5093DDBF": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when S3 upload error rate is high (default)",
    "AlarmName": "quip-sync-default-s3-upload-errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "S3UploadErrors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "s3_upload_errors"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 3,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncS3UploadErrorAlarm/Resource"
   }
  },
  "QuipSyncSuccessRateAlarmC8E04041": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when sync success rate drops below 90% (default)",
    "AlarmName": "quip-sync-default-success-rate-low",
    "ComparisonOperator": "LessThanThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "SyncSuccessRate",
    "Namespace": "AWS/Lambda",
    "Period": 900,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "sync_success_rate"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 90,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncSuccessRateAlarm/Resource"
   }
  },
  "QuipSyncHighAPILatencyAlarm83E8FAC8": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Alert when average Quip API latency is high (default)",
    "AlarmName": "quip-sync-default-high-api-latency",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "QuipSyncFunctionD64B4FCC"
      }
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "AvgQuipAPILatency",
    "Namespace": "AWS/Lambda",
    "Period": 600,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "AlarmType",
      "Value": "high_api_latency"
     },
     {
      "Key": "Application",
      "Value": "QuipS3Sync"
     },
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "Purpose",
      "Value": "QuipSync"
     }
    ],
    "Threshold": 10,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/QuipSyncHighAPILatencyAlarm/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/02NwU7DMBBEv6V3xyjJiSOtBBcOUeCOts6SmtjeymtTVZb/HTsJgtO8mdHOdrLrWtke4MaNmpbG6LNMbwHUIk6fbgAPFgN6UfqPxL1Mx6gWDLXcaZOBjFb3v3j3mzkCYxaMymNgCw5m9OXL6uvJRllosDKNZLCGVbMwNLNMrzS/eIrXmv9y6cCeJ5DpOToVNLna/ucBvdXMxWWB3+hCWRrjvh7rOrsSvdNVq5qtkIUyFKcbBHWR6cmAt7VbIeeKJ3KTXn+MyBS9KkPDPVzIPfSy7eXj4Yu1bnx0QVuU46Y/7wnXhGkBAAA="
   },
   "Metadata": {
    "aws:cdk:path": "QuipSyncStack-default/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Conditions": {
  "HasServiceRole": {
   "Fn::Not": [
    {
     "Fn::Equals": [
      {
       "Ref": "serviceRoleArn"
      },
      ""
     ]
    }
   ]
  },
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-3"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-4"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-2"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      }
     ]
    },
    {
     "Fn::Equals": [
      {
       "Ref": "AWS::Region"
      },
      "us-west-2"
     ]
    }
   ]
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}